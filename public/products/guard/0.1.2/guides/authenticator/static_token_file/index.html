<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="theme-color" content="#2D9AED" />
    <title>KubeDB Home</title>
    
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    
    <link rel="stylesheet" href="/assets/css/font-awesome.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma-carousel.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma.min.css" />
    
    <link rel="stylesheet" href="/assets/css/style.css" />
    
    <link rel="stylesheet" href="/assets/css/responsive.css" />
  </head>

  <body>
    

    
    





<header>
  
  <div class="header-bottom-area header-area documentation-page" id="header">
    <div class="container section">
      <nav class="navbar">
        <div class="navbar-brand">
          <a class="navbar-item" href="./../index.html">
            <img src="/assets/images/logo-color-kube.png" alt="" />
          </a>

          <a
            role="button"
            class="navbar-burger burger"
            aria-label="menu"
            aria-expanded="false"
            data-target="acNav"
          >
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>

        <div id="acNav" class="navbar-menu main-menu">
          <div class="navbar-end">
            
            <div class="navbar-start">
              <a href="./../pricing/index.html" class="navbar-item">
                Commercial Support
              </a>

              <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link">
                  Database
                </a>

                <div class="navbar-dropdown">
                  <a class="navbar-item">
                    Item-1
                  </a>
                  <a class="navbar-item">
                    Item-2
                  </a>
                  <a class="navbar-item">
                    Item-3
                  </a>
                  <hr class="navbar-divider" />
                  <a class="navbar-item">
                    Item-4
                  </a>
                </div>
              </div>

              <a href="../documentations/welcome.html" class="navbar-item">
                Documentation
              </a>
              <a class="navbar-item">
                v 0.110
              </a>
              <a class="navbar-item">
                Community
              </a>
            </div>
            
            <div class="navbar-item">
              <div class="buttons main-menu-button">
                <a class="button is-small">
                  <span><i class="fa fa-github" aria-hidden="true"></i></span
                  >Star
                </a>
                <div class="star-count">
                  565
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
    
    <div class="documentation-menu">
      <div class="container section">
        <div class="columns is-centered">
          <div class="column is-half has-text-centered">
            
            <div class="responsive-menu">
              <a
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="acNav3"
              >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
              </a>
            </div>
            
            
            <nav class="documentation-navbar">
              <div id="acNav3" class="navbar-menu nav-menu main-menu">
                <div class="navbar-centered">
                  
                  <div class="navbar-start">
                    
                    
                      
                        
                          <a href="/products/guard/0.1.2/" class=" navbar-item">Welcome</a>
                        
                      
                        
                          <a href="/products/guard/0.1.2/concepts/" class=" navbar-item">Concepts</a>
                        
                      
                        
                          <a href="/products/guard/0.1.2/setup/" class=" navbar-item">Setup</a>
                        
                      
                        
                          <a href="/products/guard/0.1.2/guides/" class=" is-active  navbar-item">Guides</a>
                        
                      
                        
                          <a href="/products/guard/0.1.2/reference/" class=" navbar-item">Reference</a>
                        
                      
                    
                  </div>
                  
                </div>
              </div>
            </nav>
            
          </div>
        </div>
      </div>
    </div>
    
  </div>
  
</header>


    

    
    









<div class="documentation-area">
  <div class="container section">
    <div class="columns">
      <div class="column is-3">
        
        <div class="kd-left-sidebar">
          
          
          <div class="kd-version">
            
            <div class="control has-icons-left">
              <div class="select">
                
                
                <select>
                  
                    
                    
                      
                        <option>master</option>
                      
                    
                  
                    
                    
                      
                        <option >0.4.0</option>
                      
                    
                  
                    
                    
                      
                        <option >0.3.0</option>
                      
                    
                  
                    
                    
                      
                        <option >0.2.1</option>
                      
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                </select>
              </div>
              <span class="icon is-left">
                <i class="fa fa-globe"></i>
              </span>
            </div>
          </div>
          

          
            
            
              
            
              
            
              
            
              
                
                  

                  
                  
                    
                  
                    
                  
                    
                  
                
              
            
              
            
          

          
          <div class="kd-sidebar-menu">
            
              

              
              

                
              

                
              

                
              

                
                  

                  
                  

                    
                      




  



<div class="item">
  <input type="checkbox" id="4db8c68fc59216918614c66b3132a4fa-1" >
  <label for="4db8c68fc59216918614c66b3132a4fa-1"><a href="/products/guard/0.1.2/guides/">Guides</a></label>
</div>


                    
                    
                  

                    
                      
                        






<div class="item">
  <input type="checkbox" id="4db8c68fc59216918614c66b3132a4fa-2" checked>
  <label for="4db8c68fc59216918614c66b3132a4fa-2"><a>Authenticator</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li class="is-active"><a href="/products/guard/0.1.2/guides/authenticator/static_token_file/">Static Token File</a></li>
        
      
        
          <li ><a href="/products/guard/0.1.2/guides/authenticator/github/">Github</a></li>
        
      
        
          <li ><a href="/products/guard/0.1.2/guides/authenticator/google/">Google</a></li>
        
      
        
          <li ><a href="/products/guard/0.1.2/guides/authenticator/azure/">Azure</a></li>
        
      
        
          <li ><a href="/products/guard/0.1.2/guides/authenticator/gitlab/">Gitlab</a></li>
        
      
        
          <li ><a href="/products/guard/0.1.2/guides/authenticator/ldap/">LDAP</a></li>
        
      
        
          <li ><a href="/products/guard/0.1.2/guides/authenticator/ldap_azure/">Azure AD</a></li>
        
      
    </ul>
  </div>
</div>


                      

                    
                    
                  

                    
                      






<div class="item">
  <input type="checkbox" id="4db8c68fc59216918614c66b3132a4fa-3" >
  <label for="4db8c68fc59216918614c66b3132a4fa-3"><a href="/products/guard/0.1.2/guides/rbac/">RBAC Roles</a></label>
</div>


                    
                    
                  
                  

                
              

                
              
              
            
          </div>



































          
        </div>
        
      </div>
      <div class="column is-7">
        <div class="full-info">
          

<h1 id="static-token-file-authentication">Static Token File Authentication</h1>

<p>TO use static token file authentication, you need to set <code>--token-auth-file</code> flag of your guard server to a <a href="https://kubernetes.io/docs/admin/authentication/#static-token-file">token file</a>.</p>

<p>You can use the following command with <code>--token-auth-file</code> to generate YAMLs for deploying guard server with static token file authentication.</p>

<pre><code class="language-console">$ guard get installer \
    --auth-providers=&quot;token-auth&quot; \
    --token-auth-file=&lt;path_to_the_token_file&gt; \
    &gt; installer.yaml

$ kubectl apply -f installer.yaml
</code></pre>

<p><img src="/products/guard/0.1.2/images/token-auth-webhook-flow.png" alt="github-webhook-flow" /></p>

<pre><code class="language-json">{
  &quot;apiVersion&quot;: &quot;authentication.k8s.io/v1&quot;,
  &quot;kind&quot;: &quot;TokenReview&quot;,
  &quot;status&quot;: {
    &quot;authenticated&quot;: true,
    &quot;user&quot;: {
      &quot;username&quot;: &quot;&lt;user-name&gt;&quot;,
      &quot;uid&quot;: &quot;&lt;user-id&gt;&quot;,
      &quot;groups&quot;: [
        &quot;&lt;group-1&gt;&quot;,
        &quot;&lt;group-2&gt;&quot;
      ]
    }
  }
}
</code></pre>

<p>Guard uses the token found in <code>TokenReview</code> request object to get user&rsquo;s information and list of groups this user is member of. In the <code>TokenReview</code> response, <code>status.user.username</code>, <code>status.user.uid</code> and <code>status.user.groups</code> are set to username, userid and groups found in token file.</p>

<h3 id="token-file">Token file</h3>

<p>Token file is a csv file containing four columns: token, username, user uid and group names. Group names column may be empty or contain multiple names. Token must be unique for each user.</p>

<table>
<thead>
<tr>
<th>username</th>
<th>uid</th>
<th>token</th>
<th>List groups user is member of</th>
</tr>
</thead>

<tbody>
<tr>
<td>user1</td>
<td>1123</td>
<td>alkskjhfdku3jkfhm</td>
<td>test,dev</td>
</tr>

<tr>
<td>user2</td>
<td>566</td>
<td>kjasdfgjkewyucxmj12</td>
<td>dev</td>
</tr>

<tr>
<td>user3</td>
<td>7654</td>
<td>lskdfjldskfnkjhf</td>
<td></td>
</tr>
</tbody>
</table>

<p>For above user&rsquo;s, token file is given below:</p>

<pre><code class="language-console">$ cat token.csv
alkskjhfdku3jkfhm,user1,1123,&quot;test,dev&quot;
kjasdfgjkewyucxmj12,user2,566,dev
lskdfjldskfnkjhf,user3,7654,

</code></pre>

<h3 id="configure-kubectl">Configure Kubectl</h3>

<pre><code class="language-console">kubectl config set-credentials &lt;user_name&gt; --token=&lt;token&gt;
</code></pre>

<p>Or You can add user in .kube/config file</p>

<pre><code class="language-yaml">...
users:
- name: &lt;user_name&gt;
  user:
    token: &lt;token&gt;
</code></pre>

<pre><code class="language-console">$ kubectl get pods --all-namespaces --user &lt;user_name&gt;
NAMESPACE     NAME                               READY     STATUS    RESTARTS   AGE
kube-system   etcd-minikube                      1/1       Running   0          7h
kube-system   kube-addon-manager-minikube        1/1       Running   0          7h
kube-system   kube-apiserver-minikube            1/1       Running   1          7h
kube-system   kube-controller-manager-minikube   1/1       Running   0          7h
kube-system   kube-dns-6f4fd4bdf-f7csh           3/3       Running   0          7h
</code></pre>

<blockquote>
<p><strong>Note:</strong> If you set up guard only for static token authentication , then you will need a client cert with <code>Organization</code> set to <code>token-auth</code>. if you set up guard for static token authentication and other auth provider (for example, <code>--auth-providers=&quot;token-auth,github&quot;</code>), then at first guard will check for static token authentication if not succeeded then it will check for other provider. And for multiple auth providers, if you set permissions based on group names, then please be aware of same group name from different authenticators.</p>
</blockquote>

        </div>
      </div>
      <div class="column is-2">
        <div class="right-sidebar-area">
          
          <div class="search-area">
            <form action="#">
              <input type="text" placeholder="Search..." />
              <button class="search-button">
                <i class="fa fa-search" aria-hidden="true"></i>
              </button>
            </form>
          </div>
          

          
          <div class="tbl-of-contents">
            <h4>What's on this Page</h4>
            <nav id="TableOfContents">
<ul>
<li><a href="#static-token-file-authentication">Static Token File Authentication</a>
<ul>
<li>
<ul>
<li><a href="#token-file">Token file</a></li>
<li><a href="#configure-kubectl">Configure Kubectl</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>



    
    
<section></section>

    

    
    
<section></section>

    

    
    
    <section class="cta-area section-padding pt-0">
      <div class="container section">
        <div class="cta-padding">
          <div class="columns">
            <div class="column is-6">
              
              <div class="cta-text">
                <h2>Ready to get Start?</h2>
                <p>Create a Free Account and refer your friend</p>
              </div>
              
            </div>
            <div class="column is-6 has-text-right is-mobile">
              <div class="cta-button d-table">
                
                <div class="cta-button-inner d-table-cell">
                  <a href="#" class="button kd-button kd-primary"
                    >Try Now for FREE</a
                  >
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    

    
    
    <footer class="footer-area">
      <div class="footer-top">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <div class="single-footer-widget">
                
                <div class="footer-logo">
                  <a href="#"
                    ><img
                      src="/assets/images/logo-color-appscode.png"
                      alt=""
                      class="img"
                  /></a>
                </div>
                

                
                <div class="subscription-form">
                  <form action="#">
                    <label for="email">Subscribe Our Newsletter</label>
                    <div class="field has-addons">
                      <div class="control">
                        <input
                          class="input"
                          name="email"
                          id="email"
                          type="email"
                          placeholder="info@gmail.com"
                        />
                      </div>
                      <div class="control">
                        <a class="button kd-primary">
                          <i class="fa fa-paper-plane-o" aria-hidden="true"></i>
                        </a>
                      </div>
                    </div>
                  </form>
                </div>
                

                
                <div class="contact-information">
                  <h4>Have any Inquiry?</h4>
                  <ul class="all-contact-info">
                    <li>
                      <a href="callto:+123456789"
                        ><span
                          ><i class="fa fa-phone" aria-hidden="true"></i></span
                        >+123 456 789</a
                      >
                    </li>

                    <li>
                      <a href="mailto:appscode@gmail.com"
                        ><span
                          ><i
                            class="fa fa-envelope-o"
                            aria-hidden="true"
                          ></i></span
                        >appscode@gmail.com</a
                      >
                    </li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Products</h4>
                  <ul class="footer-link">
                    <li><a href="#">Voyager</a></li>
                    <li><a href="#">KubeDB</a></li>
                    <li><a href="#">Pharmer Stash </a></li>
                    <li><a href="#">Service Broker</a></li>
                    <li><a href="#">Kubed</a></li>
                    <li><a href="#">Guard</a></li>
                    <li><a href="#">Swift</a></li>
                    <li><a href="#">Searchlight</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Offerings</h4>
                  <ul class="footer-link">
                    <li><a href="#">Products</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Open source </a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Company</h4>
                  <ul class="footer-link">
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">blog</a></li>
                    <li><a href="#">Seles Inquiry</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Legal</h4>
                  <ul class="footer-link">
                    <li><a href="#">Service Level Agreement</a></li>
                    <li><a href="#">Security</a></li>
                    <li><a href="#">Learn More</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <p>All rights reserved Â© 2018. Appscode, Inc..</p>
            </div>
            <div class="column is-4 is-mobile has-text-centered">
              <div class="footer-inline-link">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
              </div>
            </div>
            <div class="column is-4 is-mobile has-text-right">
              <div class="socail-link-inline">
                <ul>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-facebook" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-github" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-youtube" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    
    

    
    <script src="/assets/js/bulma-carousel.min.js"></script>
    
    <script src="/assets/js/main.js"></script>
  </body>
</html>
