<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="theme-color" content="#2D9AED" />
    <title>KubeDB Home</title>
    
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    
    <link rel="stylesheet" href="/assets/css/font-awesome.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma-carousel.min.css" />
    
    <link rel="stylesheet" href="/assets/css/bulma.min.css" />
    
    <link rel="stylesheet" href="/assets/css/style.css" />
    
    <link rel="stylesheet" href="/assets/css/responsive.css" />
  </head>

  <body>
    

    
    





<header>
  
  <div class="header-bottom-area header-area documentation-page" id="header">
    <div class="container section">
      <nav class="navbar">
        <div class="navbar-brand">
          <a class="navbar-item" href="./../index.html">
            <img src="/assets/images/logo-color-kube.png" alt="" />
          </a>

          <a
            role="button"
            class="navbar-burger burger"
            aria-label="menu"
            aria-expanded="false"
            data-target="acNav"
          >
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>

        <div id="acNav" class="navbar-menu main-menu">
          <div class="navbar-end">
            
            <div class="navbar-start">
              <a href="./../pricing/index.html" class="navbar-item">
                Commercial Support
              </a>

              <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link">
                  Database
                </a>

                <div class="navbar-dropdown">
                  <a class="navbar-item">
                    Item-1
                  </a>
                  <a class="navbar-item">
                    Item-2
                  </a>
                  <a class="navbar-item">
                    Item-3
                  </a>
                  <hr class="navbar-divider" />
                  <a class="navbar-item">
                    Item-4
                  </a>
                </div>
              </div>

              <a href="../documentations/welcome.html" class="navbar-item">
                Documentation
              </a>
              <a class="navbar-item">
                v 0.110
              </a>
              <a class="navbar-item">
                Community
              </a>
            </div>
            
            <div class="navbar-item">
              <div class="buttons main-menu-button">
                <a class="button is-small">
                  <span><i class="fa fa-github" aria-hidden="true"></i></span
                  >Star
                </a>
                <div class="star-count">
                  565
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
    
    <div class="documentation-menu">
      <div class="container section">
        <div class="columns is-centered">
          <div class="column is-half has-text-centered">
            
            <div class="responsive-menu">
              <a
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="acNav3"
              >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
              </a>
            </div>
            
            
            <nav class="documentation-navbar">
              <div id="acNav3" class="navbar-menu nav-menu main-menu">
                <div class="navbar-centered">
                  
                  <div class="navbar-start">
                    
                    
                      
                        
                          <a href="/products/guard/0.3.0/" class=" navbar-item">Welcome</a>
                        
                      
                        
                          <a href="/products/guard/0.3.0/concepts/" class=" navbar-item">Concepts</a>
                        
                      
                        
                          <a href="/products/guard/0.3.0/setup/" class=" is-active  navbar-item">Setup</a>
                        
                      
                        
                          <a href="/products/guard/0.3.0/guides/" class=" navbar-item">Guides</a>
                        
                      
                        
                          <a href="/products/guard/0.3.0/reference/" class=" navbar-item">Reference</a>
                        
                      
                    
                  </div>
                  
                </div>
              </div>
            </nav>
            
          </div>
        </div>
      </div>
    </div>
    
  </div>
  
</header>


    

    
    









<div class="documentation-area">
  <div class="container section">
    <div class="columns">
      <div class="column is-3">
        
        <div class="kd-left-sidebar">
          
          
          <div class="kd-version">
            
            <div class="control has-icons-left">
              <div class="select">
                
                
                <select>
                  
                    
                    
                      
                        <option>master</option>
                      
                    
                  
                    
                    
                      
                        <option >0.4.0</option>
                      
                    
                  
                    
                    
                      
                        <option  selected >0.3.0</option>
                      
                    
                  
                    
                    
                      
                        <option >0.2.1</option>
                      
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                </select>
              </div>
              <span class="icon is-left">
                <i class="fa fa-globe"></i>
              </span>
            </div>
          </div>
          

          
            
            
              
            
              
            
              
                
                  

                  
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                    
                  
                
              
            
              
            
              
            
          

          
          <div class="kd-sidebar-menu">
            
              

              
              

                
              

                
              

                
                  

                  
                  

                    
                      




  



<div class="item">
  <input type="checkbox" id="929c937b465eb680300982b83d3c888d-1" >
  <label for="929c937b465eb680300982b83d3c888d-1"><a href="/products/guard/0.3.0/setup/">Setup</a></label>
</div>


                    
                    
                  

                    
                      






<div class="item">
  <input type="checkbox" id="929c937b465eb680300982b83d3c888d-2" >
  <label for="929c937b465eb680300982b83d3c888d-2"><a href="/products/guard/0.3.0/setup/install/">Install</a></label>
</div>


                    
                    
                  

                    
                      






<div class="item">
  <input type="checkbox" id="929c937b465eb680300982b83d3c888d-3" checked>
  <label for="929c937b465eb680300982b83d3c888d-3"><a href="/products/guard/0.3.0/setup/install-kops/">Install in Kops</a></label>
</div>


                    
                    
                  

                    
                      






<div class="item">
  <input type="checkbox" id="929c937b465eb680300982b83d3c888d-4" >
  <label for="929c937b465eb680300982b83d3c888d-4"><a href="/products/guard/0.3.0/setup/install-kubespray/">Install in Kubespray</a></label>
</div>


                    
                    
                  

                    
                      






<div class="item">
  <input type="checkbox" id="929c937b465eb680300982b83d3c888d-5" >
  <label for="929c937b465eb680300982b83d3c888d-5"><a href="/products/guard/0.3.0/setup/uninstall/">Uninstall</a></label>
</div>


                    
                    
                  

                    
                      






<div class="item">
  <input type="checkbox" id="929c937b465eb680300982b83d3c888d-6" >
  <label for="929c937b465eb680300982b83d3c888d-6"><a href="/products/guard/0.3.0/setup/troubleshooting/">Troubleshooting</a></label>
</div>


                    
                    
                  

                    
                      
                        






<div class="item">
  <input type="checkbox" id="929c937b465eb680300982b83d3c888d-7" >
  <label for="929c937b465eb680300982b83d3c888d-7"><a>Developer Guide</a> <span><i class="fa fa-angle-right"
              aria-hidden="true"></i></span></label>
  <div class="item">
    <ul>
      
        
          <li ><a href="/products/guard/0.3.0/setup/developer-guide/overview/">Overview</a></li>
        
      
        
          <li ><a href="/products/guard/0.3.0/setup/developer-guide/release/">Release Process</a></li>
        
      
    </ul>
  </div>
</div>


                      

                    
                    
                  
                  

                
              

                
              

                
              
              
            
          </div>



































          
        </div>
        
      </div>
      <div class="column is-7">
        <div class="full-info">
          

<blockquote>
<p>New to Guard? Please start <a href="/products/guard/0.3.0/concepts">here</a>.</p>
</blockquote>

<h1 id="kops-installation-guide">Kops Installation Guide</h1>

<p><a href="https://github.com/kubernetes/kops">Kops</a> is a popular installer for production grade Kubernetes clusters. Please start <a href="/products/guard/0.3.0/setup/install">here</a> to get an overview of installation steps. This document only shows distinctions during Kops setup of guard.</p>

<h2 id="during-initialize-pki">During Initialize PKI</h2>

<p>For creation of guard server config you need a free cluster ip. There is an easy trick which helps to find it in most cases: Just find out your nonMasqueradeCIDR through <code>kops edit cluster --name &lt;cluster_name&gt;</code> and then add x.x.10.96 to this range e.g. if it is 100.64.0.0 use 100.64.10.96.</p>

<p>If this does not work for some unknown reason, you have to describe one of your kube-api-server pods in kube-system namespace and find out <code>service-cluster-ip-range</code>. In this range you can use any ip which is not already assigned. You can show all ips through this command:</p>

<pre><code class="language-console">kubectl get svc --all-namespaces|grep ClusterIP |awk \'{print $4}\'|sort
</code></pre>

<pre><code class="language-console">guard init server --ips=100.64.10.96
</code></pre>

<h2 id="during-deploy-guard-server">During Deploy Guard server</h2>

<p>Before you apply your guard config with <code>kubectl apply -f</code> verify installer.yaml (<code>spec/clusterIP: 100.64.10.96</code>) is filled with rigth ip address.</p>

<h2 id="during-configure-kubernetes-api-server">During Configure Kubernetes API Server</h2>

<p>To configure your api server to use <code>--authentication-token-webhook-config-file</code> you need to edit
your kops cluster spec: <code>kops edit cluster --name &lt;cluster_name&gt;</code>. There you add the following
specifications:</p>

<pre><code class="language-yaml">spec:
  kubeAPIServer:
    authenticationTokenWebhookConfigFile: /srv/kubernetes/webhook-guard-config
  fileAssets:
  - content: |
       (OUTPUT of: guard get webhook-config your-github-org -o github --addr=100.64.10.96:443)
    name: guard-github-auth
    path: /srv/kubernetes/webhook-guard-config
    roles:
    - Master
</code></pre>

<p>After you saved your config, you have to exchange your k8s master nodes. If you have a three
master HA cluster, i recommend that you exchange one server with command: <code>kops rolling-update
cluster &lt;cluster_name&gt; --instance-group master-eu-west-1a --yes</code>. Now theoretically every third
request could work after your master node is online again. If the node does not join your cluster
or things do not work, ssh to this master node and verify kubernetes api server logs in <code>/var/log/</code>.
If some requests are working, exchange the other master nodes. This keeps your cluster working all
the time.</p>

<p>This document only shows difference between kops setup and <a href="/products/guard/0.3.0/setup/install">here</a>.</p>

        </div>
      </div>
      <div class="column is-2">
        <div class="right-sidebar-area">
          
          <div class="search-area">
            <form action="#">
              <input type="text" placeholder="Search..." />
              <button class="search-button">
                <i class="fa fa-search" aria-hidden="true"></i>
              </button>
            </form>
          </div>
          

          
          <div class="tbl-of-contents">
            <h4>What's on this Page</h4>
            <nav id="TableOfContents">
<ul>
<li><a href="#kops-installation-guide">Kops Installation Guide</a>
<ul>
<li><a href="#during-initialize-pki">During Initialize PKI</a></li>
<li><a href="#during-deploy-guard-server">During Deploy Guard server</a></li>
<li><a href="#during-configure-kubernetes-api-server">During Configure Kubernetes API Server</a></li>
</ul></li>
</ul>
</nav>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>



    
    
<section></section>

    

    
    
<section></section>

    

    
    
    <section class="cta-area section-padding pt-0">
      <div class="container section">
        <div class="cta-padding">
          <div class="columns">
            <div class="column is-6">
              
              <div class="cta-text">
                <h2>Ready to get Start?</h2>
                <p>Create a Free Account and refer your friend</p>
              </div>
              
            </div>
            <div class="column is-6 has-text-right is-mobile">
              <div class="cta-button d-table">
                
                <div class="cta-button-inner d-table-cell">
                  <a href="#" class="button kd-button kd-primary"
                    >Try Now for FREE</a
                  >
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    

    
    
    <footer class="footer-area">
      <div class="footer-top">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <div class="single-footer-widget">
                
                <div class="footer-logo">
                  <a href="#"
                    ><img
                      src="/assets/images/logo-color-appscode.png"
                      alt=""
                      class="img"
                  /></a>
                </div>
                

                
                <div class="subscription-form">
                  <form action="#">
                    <label for="email">Subscribe Our Newsletter</label>
                    <div class="field has-addons">
                      <div class="control">
                        <input
                          class="input"
                          name="email"
                          id="email"
                          type="email"
                          placeholder="info@gmail.com"
                        />
                      </div>
                      <div class="control">
                        <a class="button kd-primary">
                          <i class="fa fa-paper-plane-o" aria-hidden="true"></i>
                        </a>
                      </div>
                    </div>
                  </form>
                </div>
                

                
                <div class="contact-information">
                  <h4>Have any Inquiry?</h4>
                  <ul class="all-contact-info">
                    <li>
                      <a href="callto:+123456789"
                        ><span
                          ><i class="fa fa-phone" aria-hidden="true"></i></span
                        >+123 456 789</a
                      >
                    </li>

                    <li>
                      <a href="mailto:appscode@gmail.com"
                        ><span
                          ><i
                            class="fa fa-envelope-o"
                            aria-hidden="true"
                          ></i></span
                        >appscode@gmail.com</a
                      >
                    </li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Products</h4>
                  <ul class="footer-link">
                    <li><a href="#">Voyager</a></li>
                    <li><a href="#">KubeDB</a></li>
                    <li><a href="#">Pharmer Stash </a></li>
                    <li><a href="#">Service Broker</a></li>
                    <li><a href="#">Kubed</a></li>
                    <li><a href="#">Guard</a></li>
                    <li><a href="#">Swift</a></li>
                    <li><a href="#">Searchlight</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Offerings</h4>
                  <ul class="footer-link">
                    <li><a href="#">Products</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Open source </a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Company</h4>
                  <ul class="footer-link">
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">blog</a></li>
                    <li><a href="#">Seles Inquiry</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>

            <div class="column is-2">
              <div class="single-footer-widget">
                
                <div class="footer-menu">
                  <h4>Legal</h4>
                  <ul class="footer-link">
                    <li><a href="#">Service Level Agreement</a></li>
                    <li><a href="#">Security</a></li>
                    <li><a href="#">Learn More</a></li>
                    <li><a href="#">Contact Us</a></li>
                  </ul>
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="container section">
          <div class="columns">
            <div class="column is-4">
              <p>All rights reserved Â© 2018. Appscode, Inc..</p>
            </div>
            <div class="column is-4 is-mobile has-text-centered">
              <div class="footer-inline-link">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
              </div>
            </div>
            <div class="column is-4 is-mobile has-text-right">
              <div class="socail-link-inline">
                <ul>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-facebook" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-github" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-youtube" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    
    

    
    <script src="/assets/js/bulma-carousel.min.js"></script>
    
    <script src="/assets/js/main.js"></script>
  </body>
</html>
